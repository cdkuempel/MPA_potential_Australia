---
title: "Human_footprint"
author: "Jade"
date: "2024-06-07"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```


# Load packages
```{r}
library(sf)
library(here)
library(tidyverse)
library(lubridate)
library(terra)
```

# Load data
Downloaded from: https://knb.ecoinformatics.org/view/doi:10.5063/F12B8WBS
2003 
```{r}
footprint2003 <- rast(here("raw_data/Human_footprint/cumulative_impact_2003.tif"))
```

```{r}
plot(log10(footprint2003+1))
```

2013
```{r}
footprint2013 <- rast(here("raw_data/Human_footprint/cumulative_impact_2013.tif"))
```

```{r}
plot(log10(footprint2013_projected+1))
lines(capad)

#This looks strange due to Aus projection, but the capad + footprint data sets line up  
```
#Input capad data 
```{r}
capad<- vect(here("output_data/All_MPA_baseline.shp"))
```

#Reproject human footprint data 
project(raster, crs(other data set we want it the same as)) - this is for when we have two different rasters 


```{r}
footprint2013_projected<- project(footprint2013,"epsg:3577")
```


#Clip footprint to Aus EEZ
might need to reproject the eez 
```{r}
crop()

#remove NA values (mask) 
mask()
#or use mask = TRUE in crop() function
```


#Use zonal statistics to find average impact in strict vs non-strict vs open 
Can use hist() or freq() to see the break down of raster values 
freq(, value = NA) to show how many are NA

global() gives statistics e.g. global(raster, "mean", na.rm = TRUE)

#Find threshold value for converted waters 


#change raster to 0 and 1 
This code is for an example, reclassing numbers less than the mean as 1 and more than the mean as 2. Needs to be as a matrix 
reclass_matrix <- c(0, sst_mean, 1, 
                    sst_mean, Inf, 2)%>% 
                    matrix(ncol = 3, byrow=TRUE)
                    
reclassed <- classify(raster, reclass_matrix)
                    